<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>회원가입</title>
    <script>
        function formatDate(inputDate) {
            const date = new Date(inputDate);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}${month}${day}`;
        }

        async function join() {
            const uiName = document.getElementById('uiName').value;
            const uiId = document.getElementById('uiId').value;
            const uiPwd = document.getElementById('uiPwd').value;
            const uiMobile = document.getElementById('uiMobile').value;
            const uiEmail = document.getElementById('uiEmail').value;
            const uiBirth = formatDate(document.getElementById('uiBirth').value);

            const userData = {
                uiName,
                uiId,
                uiPwd,
                uiMobile,
                uiEmail,
                uiBirth
            };

            const response = await fetch('/insertUserInfo', {
                method: 'POST',
                body: JSON.stringify(userData),
                headers: {
                    'Content-Type': 'application/json;charset=UTF-8'
                }
            });

            if (response.ok) {
                const result = await response.json();
                alert(result.msg);
                if (result.success) {
                    window.location.href = '/';
                }
            } else {
                console.error('회원가입 오류:', response.status);
            }
        }
    </script>
</head>
<body>
    <h1>회원가입</h1>
    <form>
        <label for="uiName">이름 :</label>
        <input type="text" id="uiName" required><br>
        <label for="uiId">아이디 :</label>
        <input type="text" id="uiId" required><br>
        <label for="uiPwd">비밀번호 :</label>
        <input type="password" id="uiPwd" required><br>
        <label for="uiMobile">휴대전화 :</label>
        <input type="text" id="uiMobile"><br>
        <label for="uiEmail">이메일 :</label>
        <input type="text" id="uiEmail"><br>
        <label for="uiBirth">생일 :</label>
        <input type="date" id="uiBirth" required><br>
        <button type="button" onclick="join()" id="btn">회원가입</button>
    </form>
</body>
</html>
